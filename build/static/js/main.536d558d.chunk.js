(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{14:function(e,n,t){e.exports=t(36)},36:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(13),o=t.n(r),u=t(2),l=t(3),i=t.n(l),s="/api/persons",d=function(){return i.a.get(s).then((function(e){return e.data}))},m=function(e){return i.a.post(s,e).then((function(e){return e.data}))},f=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e}))},p=function(e,n){return i.a.put("".concat(s,"/").concat(n),e).then((function(e){return e.data}))},b=function(e){var n=e.newSearch,t=e.typeNameForFiltering;return c.a.createElement("div",null,"filter contacts by name:",c.a.createElement("input",{value:n,onChange:t,placeholder:"add contact name to filter..."}))},h=function(e){var n=e.addNewContact,t=e.newName,a=e.typeContactName,r=e.newNumber,o=e.typeContactNumber;return c.a.createElement("form",{onSubmit:n},c.a.createElement("div",null,"name:",c.a.createElement("input",{value:t,onChange:a,placeholder:"add new contact..."})),c.a.createElement("div",null,"number:",c.a.createElement("input",{value:r,onChange:o,placeholder:"add contact's number..."})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},g=function(e){var n=e.persons,t=e.newSearch,a=e.deleteContact,r=t.length>0?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):n;return c.a.createElement("ul",null,r.map((function(e,n){return c.a.createElement("li",{key:e.name+n},c.a.createElement("span",null,e.name,": ",e.number),c.a.createElement("button",{onClick:function(){return a(e)}},"delete"))})))},v=function(e){var n=e.newFeedback,t={display:"inline-block",padding:"1rem",fontWeight:700,border:"1px solid",borderColor:n.success?"green":"red",backgroundColor:n.success?"lightgreen":"orange"};return n?c.a.createElement("div",{style:t},n.message):null},E=function(){Object(a.useEffect)((function(){d().then((function(e){r(e)}))}),[]);var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),l=Object(u.a)(o,2),i=l[0],s=l[1],E=Object(a.useState)(""),w=Object(u.a)(E,2),C=w[0],y=w[1],N=Object(a.useState)(""),j=Object(u.a)(N,2),O=j[0],k=j[1],S=Object(a.useState)(""),F=Object(u.a)(S,2),U=F[0],A=F[1],x=function(e){var n=e&&e.delay?e.delay:3e3;A(e),e.success&&D(),setTimeout((function(){A(!1)}),n)},D=function(){s(""),y("")};return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(b,{newSearch:O,typeNameForFiltering:function(e){k(e.target.value)}}),c.a.createElement(v,{newFeedback:U}),c.a.createElement("h2",null,"Add new contact"),c.a.createElement(h,{newName:i,typeContactName:function(e){s(e.target.value)},newNumber:C,typeContactNumber:function(e){y(e.target.value)},addNewContact:function(e){if(e.preventDefault(),i&&C){var n={name:i,number:C};if(c=i,t.every((function(e){return e.name!==c})))m(n).then((function(e){console.log("added contact:",e),r(t.concat(e)),x({message:"Added ".concat(i.toUpperCase(),"!"),success:!0})})).catch((function(e){console.log(e),x({message:e.response.data.error,success:!1})}));else if(window.confirm("".concat(i," is already added to phonebook. Replace the old number with a new one?"))){var a=t.find((function(e){return e.name===i})).id;p(n,a).then((function(e){console.log("updatedContact:",e),r(t.map((function(n){return n.id!==e.id?n:e}))),x({message:"Updated ".concat(e.name.toUpperCase(),"'s number!"),success:!0})})).catch((function(e){console.log(e),x({message:"Information of ".concat(n.name.toUpperCase()," has already been removed from the server!"),success:!1})}))}}else alert("Add both name and number!");var c}}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(g,{persons:t,newSearch:O,deleteContact:function(e){window.confirm("Delete ".concat(e.name,"?"))&&f(e.id).then((function(n){console.log("deleted contact:",n),r(t.filter((function(n){return n.id!==e.id}))),x({message:"".concat(e.name," has been deleted succesfully!"),success:!0,delay:1500})}))}}))};o.a.render(c.a.createElement(E,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.536d558d.chunk.js.map